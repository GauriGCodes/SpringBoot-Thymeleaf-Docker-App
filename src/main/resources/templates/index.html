<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0" />
    <title>Students API</title>

    <link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}" />
    <script type="text/javascript" th:src="@{/webjars/jquery/jquery.min.js}"></script>
    <script type="text/javascript" th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
</head>

<body>
    <h1 class="app-heading">Alpha University - Graduate CS Student API</h1>


    <form>
        Click to Display all Students <br>
        <input type="button" value="Display all Students" onclick="displayAllStudents()">
    </form>

    <form>
        Click to display a student
        <label for="studentid">Student id </label>
        <input id="studentid" type="text" name="studentid" value="1 - 5" pattern="[1-5]"><br>
        <input type="button" value="Display student" onclick="displayStudent()"></input>
    </form>

    <form>
        <label for="stuid">Course Registered by Student </label>
        <input id="stuid" type="text" name="stuid" value="1 - 5" pattern="[1-5]"><br>
        <input type="button" value="Display Course Registered" onclick="displayCourseRegistered()"></input>
    </form>

    <form>
        <label for="studentID">Student id</label>
        <input id="studentID" type="text" name="studentID" value="1 - 5" pattern="[1-5]"><br>
        <label for="courseid">Course ID </label>
        <input id="courseid" type="text" name="courseid" value="1 - 5" pattern="[1-5]"><br>
        <input type="button" value="Display Course" onclick="displayCourse()"></input>
    </form>


    <table id="main-content" class="table table-striped table-bordered table-hover">
        <thead class="thead-light">
            <tr>
                <th scope="col">id</th>
                <th scope="col" colspan="2">Name</th>
                <th scope="col">Email</th>
                <th scope="col" colspan="2">Phone</th>
                <th scope="col">Age</th>
                <th scope="col" colspan="3">Course Registered</th>
            </tr>
        </thead>
        <tbody id="show">
        </tbody>
    </table>



    <script type="text/javascript">

        function displayAllStudents() {
            $('#show').html('');
            $('#main-content').show();
            $.ajax('/students', {
                dataType: 'JSON'
            }).done(function (data) {
                console.log(data);
                for (let student in data) {
                    $("#show").append('<tr><td>' + data[student].id + '</td><td colspan="2">' + data[student].name + '</td><td>' + data[student].email + '</td><td colspan="2">' + data[student].phone +
                        '</td><td>' + data[student].age + '</td><td>' + data[student].courseRegistered["1"] + '</td><td>' +
                        data[student].courseRegistered["2"] + '</td><td>' + data[student].courseRegistered["3"] + '</td></tr>');
                }
            }).fail(function (error) {
                console.log(error)
            })
        };

        function displayStudent() {
            $('#show').html('');
            $.ajax('/students/' + $('#studentid').val(), {
                dataType: 'JSON'
            }).done(function (data) {
                console.log(data);
                $("#show").append('<tr><td>' + data['id'] + '</td><td colspan="2">' + data['name'] + '</td><td>' + data['email'] + '</td><td colspan="2">' + data['phone'] +
                    '</td><td>' + data['age'] + '</td><td>' + data.courseRegistered["1"] + '</td><td>' +
                    data.courseRegistered["2"] + '</td><td>' + data.courseRegistered["3"] + '</td></tr>');

            }).fail(function (error) {
                console.log(error)
            })
        };

        function displayCourseRegistered() {
            $('#show').html('');
            $.ajax('/students/' + $('#stuid').val() + '/courseRegistered', {
                dataType: 'JSON'
            }).done(function (data) {
                console.log(data);
                $("#show").append('<tr><td>' + $('#stuid').val() + '</td><td colspan="2"></td><td></td><td colspan="2"></td><td></td><td>' + data["1"] + '</td><td>' +
                    data["2"] + '</td><td>' + data["3"] + '</td></tr>');

            }).fail(function (error) {
                console.log(error)
            })
        };

        function displayCourse() {
            $('#show').html('');
            $.ajax('/students/' + $('#studentID').val() + '/courseRegistered/' + $('#courseid').val()).done(function (data) {
                console.log(data);
                $("#show").append('<tr><td>' + $('#studentID').val() + '</td><td colspan="2"></td><td></td><td colspan="2"></td><td></td><td>' + data + '</td></tr>');

            }).fail(function (error) {
                console.log(error)
            })
        };
    </script>

</body>

</html>